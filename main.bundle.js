(()=>{"use strict";var e={528:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(81),r=n.n(i),s=n(645),o=n.n(s),a=n(667),d=n.n(a),c=new URL(n(144),n.b),l=new URL(n(965),n.b),h=o()(r()),u=d()(c),g=d()(l);h.push([e.id,`.button{font-family:"Nunito";color:#f7fff7;margin:0;transition:.15s;font-weight:600;font-size:14px;border-radius:12px;border:0;padding:12px 24px;box-sizing:border-box}.button_type_primary{background:#7368b6}@media(hover: hover){.button_type_primary:hover{background:#4e439d}}.button_type_secondary{background:#e9e8f1;color:#7368b6}@media(hover: hover){.button_type_secondary:hover{background:#b7afe0;color:#f7fff7}}.ring{height:48px;touch-action:none;z-index:1;border-radius:10px}.ring_size_1{width:27%;background:#f7fff7}.ring_size_2{width:34%;background:#ffc914}.ring_size_3{width:41%;background:#d27e3a}.ring_size_4{width:48%;background:#fe6d73}.ring_size_5{width:55%;background:#1a936f}.ring_size_6{width:62%;background:#3f88c5}.ring_size_7{width:69%;background:#573280}.ring_state_dragged{position:absolute;z-index:2}.ring_state_normal_size_1{width:27.5%;background:#f7fff7}.ring_state_normal_size_2{width:35%;background:#ffc914}.ring_state_normal_size_3{width:42.5%;background:#d27e3a}.ring_state_normal_size_4{width:50%;background:#fe6d73}.ring_state_normal_size_5{width:57.5%;background:#1a936f}.ring_state_normal_size_6{width:65%;background:#3f88c5}.ring_state_normal_size_7{width:72.5%;background:#573280}.tower{display:flex;flex-direction:column;justify-content:flex-end;align-items:center;width:100%;position:relative}.tower::before{content:"";width:24px;height:100%;display:block;background:#383744;position:absolute}@font-face{src:url(${u});font-family:"Font Awesome"}.icon{background:none;border:0;padding:0;font-family:"Font Awesome" !important;font-size:20px !important}.icon_color_purple{color:#7368b6}@media(hover: hover){.icon:hover{color:#f7fff7}}.slider{display:flex;flex-direction:column;justify-content:center;row-gap:12px}.slider__label{display:flex;justify-content:center;align-items:center;column-gap:48px}.slider__input{height:6px;border-radius:6px;accent-color:#7368b6}.dark-background{width:100vw;height:100vh;position:absolute;left:0;top:0;z-index:3;background:rgba(0,0,0,.5)}.dark-background_hidden{display:none;z-index:-1}.game{width:90vw;max-width:900px;display:flex;border-bottom:24px solid #383744}.body{background:#24232e;overflow:hidden;width:100%;height:100vh;margin:0;display:flex;justify-content:center;align-items:center}.wrapper{width:fit-content;height:fit-content;display:flex;flex-direction:column;align-items:center;row-gap:48px}.wrapper__menu{display:grid;grid-template-columns:1fr auto 1fr;column-gap:24px}.modal{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;padding:24px 48px;box-sizing:border-box;border-radius:24px;background:#383744;z-index:4;position:absolute}.modal_hidden{z-index:-1;display:none}.modal__title{display:flex;flex-direction:column;align-items:center;row-gap:6px}.modal__buttons{display:flex;flex-direction:column;row-gap:6px}.modal__row{width:100%;display:flex;justify-content:space-between;column-gap:24px}@font-face{src:url(${g});font-family:"Nunito"}.header{font-family:"Nunito";color:#f7fff7;margin:0;font-weight:700;display:inline-flex;align-items:center;column-gap:6px}.header_size_l{font-size:32px}.header_size_m{font-size:24px}.header_size_s{font-size:20px}.header_color_purple{color:#7368b6}.header_type_number{font-variant-numeric:tabular-nums}.paragraph{font-family:"Nunito";color:#f7fff7;margin:0;font-size:18px}.paragraph_color_purple{color:#7368b6}.paragraph_weight_sb{font-weight:600}.paragraph_type_number{font-variant-numeric:tabular-nums}@media(max-width: 650px){.ring_size_1{width:37.5%;background:#f7fff7}.ring_size_2{width:45%;background:#ffc914}.ring_size_3{width:52.5%;background:#d27e3a}.ring_size_4{width:60%;background:#fe6d73}.ring_size_5{width:67.5%;background:#1a936f}.ring_size_6{width:75%;background:#3f88c5}.ring_size_7{width:82.5%;background:#573280}}@media(max-width: 500px){.game{width:100vw}.ring{height:36px}.ring_size_1{width:47.5%;background:#f7fff7}.ring_size_2{width:55%;background:#ffc914}.ring_size_3{width:62.5%;background:#d27e3a}.ring_size_4{width:70%;background:#fe6d73}.ring_size_5{width:77.5%;background:#1a936f}.ring_size_6{width:85%;background:#3f88c5}.ring_size_7{width:92.5%;background:#573280}.modal{width:100vw;height:100vh;border-radius:0;gap:48px}.button{width:100%}}`,""]);const p=h},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(o[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);i&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},o=[],a=0;a<e.length;a++){var d=e[a],c=i.base?d[0]+i.base:d[0],l=s[c]||0,h="".concat(c," ").concat(l);s[c]=l+1;var u=n(h),g={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(g);else{var p=r(g,i);i.byIndex=a,t.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var d=i(e,r),c=0;c<s.length;c++){var l=n(s[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}s=d}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},965:(e,t,n)=>{e.exports=n.p+"4a3eef3e0a61b7eb3eda.ttf"},144:(e,t,n)=>{e.exports=n.p+"d75e3fd1eb12e9bd6655.ttf"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!e;)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),i=n(795),r=n.n(i),s=n(569),o=n.n(s),a=n(565),d=n.n(a),c=n(216),l=n.n(c),h=n(589),u=n.n(h),g=n(528),p={};p.styleTagTransform=u(),p.setAttributes=d(),p.insert=o().bind(null,"head"),p.domAPI=r(),p.insertStyleElement=l(),t()(g.Z,p),g.Z&&g.Z.locals&&g.Z.locals;class f extends HTMLElement{connectedCallback(){this.classList.add("ring","ring_size_"+this.size)}get rect(){return this.getBoundingClientRect()}move(e,t){this.style.left=e+"px",this.style.top=t+"px"}setDragView(){this.classList.add("ring_state_dragged"),this.style.width=this.rect.width+"px",document.body.append(this)}setNormalView(){this.classList.remove("ring_state_dragged"),this.style.width="",this.classList.add("ring_state_normal")}getNewCoordinates(e,t){let n={right:document.body.offsetWidth-this.rect.width,bottom:document.body.offsetHeight-this.rect.height,left:document.body.offsetLeft,top:document.body.offsetTop},i=e,r=t;return t<n.top?r=n.top:t>=n.bottom&&(r=n.bottom),e<=n.left?i=n.left:e>=n.right&&(i=n.right),{newX:i,newY:r}}}class m extends HTMLElement{connectedCallback(){this.classList.add("tower")}pushRing(e){this.prepend(e),e.setNormalView(),this.reOrderRings()}reOrderRings(){let e=this.querySelectorAll(".ring");for(let t=0;t<e.length;t++)e[t].order=t}isRingCanDrop(e){return!this.firstChild||e<this.firstChild.size}}customElements.define("ring-component",f),customElements.define("tower-component",m);class b extends HTMLElement{connectedCallback(){this.classList.add("game")}stopResizing(){this.style.height=this.getBoundingClientRect().height+"px"}resize(){this.style.height="",this.classList.remove("game"),this.classList.add("game")}new(e=7){const t=this.createRings(e),n=this.createTowers();n[0].append(...t),this.textContent="",this.append(...n),this.resize(),this.stopResizing()}start(){this.boundedDragStart=this.onDragStart.bind(this),document.ondragstart=()=>!1,document.addEventListener("pointerdown",this.boundedDragStart)}stop(){document.removeEventListener("pointerdown",this.boundedDragStart)}createRings(e){let t=[];for(let n=0;n<e;n++){let e=document.createElement("ring-component");e.order=n,e.size=n+1,t.push(e)}return t}createTowers(){let e=[];for(let t=0;t<3;t++){let t=document.createElement("tower-component");e.push(t)}return e}addEventListeners(){this.dragHandlers={drag:this.onDrag.bind(this),end:this.onDragEnd.bind(this),cancel:this.onDragCancel.bind(this)},document.addEventListener("pointerup",this.dragHandlers.end),document.addEventListener("pointermove",this.dragHandlers.drag),document.body.addEventListener("pointerleave",this.dragHandlers.cancel)}removeEventListeners(){document.removeEventListener("pointerup",this.dragHandlers.end),document.removeEventListener("pointermove",this.dragHandlers.drag),document.body.removeEventListener("pointerleave",this.dragHandlers.cancel)}onDragStart({target:e,pageX:t,pageY:n}){this.isDraggebleRing(e)&&(this.draggedRing=e,this.sourceTower=this.draggedRing.closest(".tower"),this.shiftX=t-this.draggedRing.rect.left,this.shiftY=n-this.draggedRing.rect.top,this.draggedRing.setDragView(),this.draggedRing.move(t-this.shiftX,n-this.shiftY),this.addEventListeners())}onDragEnd({clientX:e,clientY:t}){this.draggedRing.hidden=!0;let n=document.elementFromPoint(e,t)?.closest(".tower");this.draggedRing.hidden=!1,n&&n!==this.sourceTower&&n.isRingCanDrop(this.draggedRing.size)?(n.pushRing(this.draggedRing),this.sourceTower.reOrderRings()):this.sourceTower.pushRing(this.draggedRing),this.removeEventListeners()}onDrag({clientX:e,clientY:t}){let{newX:n,newY:i}=this.draggedRing.getNewCoordinates(e-this.shiftX,t-this.shiftY);this.draggedRing.move(n,i)}onDragCancel(){this.sourceTower.pushRing(this.draggedRing)}isDraggebleRing(e){return e&&!e.order&&e.classList.contains("ring")}}const v={modals:{start:document.getElementById("startGameModal"),finish:document.getElementById("finishGameModal"),pause:document.getElementById("pauseGameModal")},darkBg:document.querySelector(".dark-background"),hide(e){e.classList.add("modal_hidden"),this.darkBg.classList.add("dark-background_hidden")},hideAll(){for(let e in this.modals)this.hide(this.modals[e])},show(e){e.classList.remove("modal_hidden"),this.darkBg.classList.remove("dark-background_hidden")}};class w{constructor(){this.outputs=document.querySelectorAll(".timeOutput"),this.displayTime(0),this.delay=1e3,this.time=0}start(e=0){this.stopwatchId=setInterval((()=>{this.time+=this.delay,this.time-=e,this.displayTime(this.time)}),this.delay)}stop(){clearInterval(this.stopwatchId),this.stopwatchId=null}displayTime(e){let t=new Date(e),n=t.getMinutes(),i=t.getSeconds();n<10&&(n="0"+n.toString()),i<10&&(i="0"+i.toString());for(let e of this.outputs)e.value=`${n}:${i}`}}customElements.define("game-component",b);const _=document.getElementById("movesMenuOutput"),y=document.getElementById("movesFinishOutput");(new class{constructor(){const e=document.createElement("game-component");document.querySelector(".wrapper").append(e),this.game=e,this.moves=0,this.movesObserver=new MutationObserver((([e])=>{0!=e.addedNodes.length&&this.game.sourceTower!=e.target&&(this.moves++,_.value=this.moves,y.value=this.moves)})),this.finishObserver=new MutationObserver((([{target:e}])=>{e.children.length===this.numberOfRings&&this.finish()}))}again(){v.hideAll(),v.show(v.modals.start)}new(){this.numberOfRings=Number(document.querySelector("#sliderInput").value),this.game.new(this.numberOfRings),this.stopwatch=new w,this.observeGame(),this.start(),this.resetInfo()}start(){v.hideAll(),this.game.start(),this.stopwatch.start(0)}finish(){v.show(v.modals.finish),this.game.stop(),this.stopwatch.stop()}pause(){this.game.stop(),this.stopwatch.stop(),v.show(v.modals.pause)}observeGame(){const e={childList:!0};for(let t of this.game.children)this.movesObserver.observe(t,e);this.finishObserver.observe(this.game.lastChild,e)}resetInfo(){this.moves=0,_.value=this.moves,y.value=this.moves}setHandlers(){let e=document.querySelectorAll(".button");for(let t of e)switch(t.value){case"start":t.addEventListener("click",(()=>this.start()));break;case"pause":t.addEventListener("click",(()=>this.pause()));break;case"new":t.addEventListener("click",(()=>this.new()));break;case"again":t.addEventListener("click",(()=>this.again()))}}}).setHandlers();const x=document.getElementById("sliderInput"),k=document.getElementById("sliderOutput");x.addEventListener("input",(()=>{k.value=x.value}))})()})();